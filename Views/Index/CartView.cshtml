@model List<products.Models.CShoppingCartItem>

@{
    ViewData["Title"] = "CartView";
}
<!-- Favicon -->
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />

<!-- Themefisher Icon font -->
<link rel="stylesheet" href="~/demo/plugins/themefisher-font/style.css">
<!-- bootstrap.min css -->
<link rel="stylesheet" href="~/demo/plugins/bootstrap/css/bootstrap.min.css">

<!-- Animate css -->
<link rel="stylesheet" href="~/demo/plugins/animate/animate.css">
<!-- Slick Carousel -->
<link rel="stylesheet" href="~/demo/plugins/slick/slick.css">
<link rel="stylesheet" href="~/demo/plugins/slick/slick-theme.css">

<!-- Main Stylesheet -->
<link rel="stylesheet" href="~/demo/css/style.css">
<br />
<br />
<br />
<br />
@*麵包屑*@
<section class="page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="content">
                    <h1 class="page-name">購買確認</h1>
                    <ol class="breadcrumb">
                        <li><a asp-controller="Index" asp-action="Index">首頁</a></li>
                        <li class="active">購買確認</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>


<table class="table" >
    <tr>
        <th>
            NO
        </th>
        <th>
            購買品項
        </th>
        <th>
            @Html.DisplayNameFor(model => model[0].count)
        </th>
        <th>
            @Html.DisplayNameFor(model => model[0].price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model[0].小計)
        </th>
        <th>
            操作
        </th>
    </tr>

@{ 
    int count = 0;
    decimal pay = 0;
    decimal tax = 0;
    decimal sum = 0;
    foreach (var item in Model)
    {
        count++;
        pay +=item.小計;
        <tr>
            <td>
                @count
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.product.ProductName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.count)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.price)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.小計)
            </td>
            <td>
                <!-- 編輯 -->
                <button type="button" class="btn btn-sm" style=" background-color:#fafafa;" onclick="location.href='@Url.Action("AddToCart", new { id = item.productId })'">
                    <i class="fa-solid fa-pen-to-square" style="color: #35444a;"></i>
                </button>

                <!-- 刪除 -->
                <a href="@Url.Action("RemoveFromCart", new { productId = item.productId })" class="btn btn-sm" style="background-color:#fafafa;">
                    <i class="fa-solid fa-trash" style="color: #35444a;"></i>
                </a>


                 <!-- 編輯 -->
            </td>
        </tr>
    }
    tax = pay * 0.05M;
    sum = pay + tax;
}
</table>

<p class="text-right">
    <a class="btn btn-primary" asp-action="CreateOrder">結帳</a>
</p>

<li style=" list-style-type: none;">交易金額: @pay.ToString("###,###,##0")</li>
<li style=" list-style-type: none;">稅額: @tax.ToString("###,###,##0")</li>
<li style=" list-style-type: none;">應付金額: @sum.ToString("###,###,##0")</li>




@*底部*@
<footer class="footer section text-center">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <ul class="social-media">
                    <li>
                        <a href="https://www.facebook.com/themefisher">
                            <i class="tf-ion-social-facebook"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.instagram.com/themefisher">
                            <i class="tf-ion-social-instagram"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.twitter.com/themefisher">
                            <i class="tf-ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.pinterest.com/themefisher/">
                            <i class="tf-ion-social-pinterest"></i>
                        </a>
                    </li>
                </ul>
                <ul class="footer-menu text-uppercase">
                    <li>
                        <a href="contact.html">首頁</a>
                    </li>
                    <li>
                        <a href="shop.html">商品</a>
                    </li>
                    <li>
                        <a href="pricing.html">購物車</a>
                    </li>
                    <li>
                        <a href="contact.html">登入</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<!-- Main jQuery -->
<script src="~/demo/plugins/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.1 -->
<script src="~/demo/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- Bootstrap Touchpin -->
<script src="~/demo/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>
<!-- Instagram Feed Js -->
<script src="~/demo/plugins/instafeed/instafeed.min.js"></script>
<!-- Video Lightbox Plugin -->
<script src="~/demo/plugins/ekko-lightbox/dist/ekko-lightbox.min.js"></script>
<!-- Count Down Js -->
<script src="~/demo/plugins/syo-timer/build/jquery.syotimer.min.js"></script>

<!-- slick Carousel -->
<script src="~/demo/plugins/slick/slick.min.js"></script>
<script src="~/demo/plugins/slick/slick-animation.min.js"></script>

<!-- Google Mapl -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCC72vZw-6tGqFyRhhg5CkF2fqfILn2Tsw"></script>
<script type="text/javascript" src="plugins/google-map/gmap.js"></script>

<!-- Main Js File -->
<script src="~/demo/js/script.js"></script>